webpackJsonp([5],{"2wfW":function(t,a,e){"use strict";var i=e("dP+h"),r=e("tJl5"),n=e("VU/8")(i.a,r.a,!1,null,null,null);n.options.__file="components/organization/form/add_organization.vue",a.a=n.exports},"9Ctr":function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i=e("YvAw"),r=e("XeU2"),n=e("VU/8")(i.a,r.a,!1,null,null,null);n.options.__file="pages/organizations/add.vue",a.default=n.exports},XeU2:function(t,a,e){"use strict";var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("v-layout",{staticClass:"mt-3",attrs:{"justify-space-around":"",wrap:""}},[e("v-flex",{staticClass:"pt-3",attrs:{xs6:"","text-xs-left":""}},[t._v("\n    Hi, "+t._s(t.$store.state.authentication.me.name)+"\n  ")]),e("v-flex",{attrs:{xs6:"","text-xs-right":""}},[e("v-btn",{staticClass:"primary--text",attrs:{flat:"",nuxt:"",to:"/organizations/add"}},[e("v-icon",[t._v("add_circle_outline")]),t._v(" Baru")],1),e("v-btn",{staticClass:"primary--text",attrs:{flat:"",nuxt:"",to:"/"}},[e("v-icon",[t._v("exit_to_app")]),t._v(" Logout")],1)],1),e("v-flex",{attrs:{xs12:""}},[e("v-card",[e("v-toolbar",{attrs:{flat:"",color:"accent white--text"}},[e("v-toolbar-title",[t._v("TAMBAH SEKOLAH")])],1),e("v-card-text",[Array.isArray(t.$store.state.ui.alerts.error)&&t.$store.state.ui.alerts.error.length>0?e("v-layout",{staticClass:"red lighten-5 mb-3 red--text",attrs:{"justify-space-around":""}},[e("v-flex",{staticClass:"my-3 text-xs-center",attrs:{xs10:"",sm10:"","justify-center":""}},t._l(this.$store.state.ui.alerts.error,function(a){return e("span",[t._v(t._s(a))])}))],1):t._e(),e("FormSekolah",{ref:"FormSekolah",on:{SUBMIT_SUCCESS:t.SUBMIT_SUCCESS,SUBMIT_FAIL:t.SUBMIT_FAIL,SUBMIT_ERROR:t.SUBMIT_ERROR}},[e("template",{staticClass:"mr-2",slot:"action"},[e("v-btn",{attrs:{flat:"",color:"primary"},on:{click:function(a){t.dialog.cancelationConfirmation=!0}}},[t._v("BATAL")])],1)],2)],1)],1)],1),e("v-dialog",{attrs:{"max-width":"300"},model:{value:t.dialog.cancelationConfirmation,callback:function(a){t.$set(t.dialog,"cancelationConfirmation",a)},expression:"dialog.cancelationConfirmation"}},[e("v-card",[e("v-card-title",{staticClass:"headline"},[t._v("Batalkan Penambahan Sekolah")]),e("v-card-text",[t._v("Apakah anda yakin membatalkan penambahan sekolah?")]),e("v-card-actions",[e("v-spacer"),e("v-btn",{attrs:{color:"primary",flat:""},nativeOn:{click:function(a){t.dialog.cancelationConfirmation=!1}}},[t._v("Tidak")]),e("v-btn",{attrs:{color:"primary",flat:""},nativeOn:{click:function(a){return t.BACK(a)}}},[t._v("Ya")])],1)],1)],1)],1)};i._withStripped=!0;var r={render:i,staticRenderFns:[]};a.a=r},YvAw:function(t,a,e){"use strict";var i=e("2wfW");a.a={middleware:["auth","session_lifetime"],components:{FormSekolah:i.a},layout:"auth_big",data:function(){return{dialog:{cancelationConfirmation:!1}}},methods:{BACK:function(t){this.$nuxt._router.replace("/organizations")},SUBMIT_SUCCESS:function(){this.$store.dispatch("ui/alert",{success:"Sekolah telah berhasil ditambahkan."}),this.$nuxt._router.replace("/organizations")},SUBMIT_FAIL:function(t){switch(t){case 1601:this.$store.dispatch("ui/alert",{error:"Sekolah ini telah terdaftar dalam akun anda"});break;default:this.$store.dispatch("ui/alert",{error:t})}},SUBMIT_ERROR:function(){alert("Gagal menghubungi server. Silahkan coba beberapa saat lagi")}}}},"dP+h":function(t,a,e){"use strict";var i=e("zJJk"),r=e.n(i);a.a={apollo:{$client:"customer"},props:{},data:function(){return{errorMessages:{},isSubmitting:!1,formData:{},GQL:{data:"AddOrganization"}}},mounted:function(){this.reset()},computed:{transformedInput:function(){return{input:{name:this.formData.name,settings:{alamat:this.formData.alamat,kota:this.formData.kota,propinsi:this.formData.propinsi,telp:[{type:"default",value:this.formData.telp}]}}}},transformedErrors:function(){return{name:this.translate(this.errorMessages.name,{name:"nama"}),alamat:this.translate(this.errorMessages.settings?this.errorMessages.settings.alamat:[],{"settings.alamat":"alamat"}),kota:this.translate(this.errorMessages.settings?this.errorMessages.settings.kota:[],{"settings.kota":"kota"}),propinsi:this.translate(this.errorMessages.settings?this.errorMessages.settings.propinsi:[],{"settings.propinsi":"propinsi"})}}},watch:{},methods:{reset:function(){this.formData={},this.errorMessages={}},submit:function(t){var a=this;if(a.isSubmitting)return!1;a.$validator.validateAll().then(function(e){e?(a.$emit("SUBMITTING"),a.isSubmitting=!0,a.$apollo.mutate({mutation:r.a,variables:a.transformedInput}).then(function(t){a.$emit("SUBMIT_SUCCESS",t.data[a.GQL.data]),a.isSubmitting=!0}).catch(function(t){t.graphQLErrors&&Array.isArray(t.graphQLErrors)&&t.graphQLErrors.length?t.graphQLErrors.forEach(function(t){switch(t.message){case"validation":a.errorMessages=t.validation,a.$forceUpdate();break;default:a.$emit("SUBMIT_FAIL",t.code)}}):t.networkError.message&&a.$emit("SUBMIT_ERROR","Fail to connect to server"),a.isSubmitting=!1})):a.errorMessages=a.$validator.errors.collect(),t.preventDefault()})}}}},tJl5:function(t,a,e){"use strict";var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("v-form",{nativeOn:{keyup:function(a){return"button"in a||13===a.keyCode?t.submit(a):null}}},[e("v-layout",{attrs:{wrap:""}},[e("v-flex",{attrs:{xs12:""}},[e("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{type:"text",name:"name",label:"Nama","error-messages":t.transformedErrors.name,placeholder:" "},model:{value:t.formData.name,callback:function(a){t.$set(t.formData,"name",a)},expression:"formData['name']"}})],1),e("v-flex",{attrs:{xs12:""}},[e("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{type:"text",name:"alamat",label:"Alamat","error-messages":t.transformedErrors.alamat,placeholder:" "},model:{value:t.formData.alamat,callback:function(a){t.$set(t.formData,"alamat",a)},expression:"formData['alamat']"}})],1),e("v-flex",{attrs:{xs6:""}},[e("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{type:"text",name:"kota",label:"Kota","error-messages":t.transformedErrors.kota,placeholder:" "},model:{value:t.formData.kota,callback:function(a){t.$set(t.formData,"kota",a)},expression:"formData['kota']"}})],1),e("v-flex",{attrs:{xs6:""}},[e("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{type:"text",name:"propinsi",label:"Propinsi","error-messages":t.transformedErrors.propinsi,placeholder:" "},model:{value:t.formData.propinsi,callback:function(a){t.$set(t.formData,"propinsi",a)},expression:"formData['propinsi']"}})],1),e("v-flex",{attrs:{xs6:""}},[e("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"min:7|max:15|numeric",expression:"'min:7|max:15|numeric'"}],attrs:{type:"text",name:"telp",label:"telp","error-messages":t.transformedErrors.telp,mask:"#### #########",placeholder:" "},model:{value:t.formData.telp,callback:function(a){t.$set(t.formData,"telp",a)},expression:"formData['telp']"}})],1)],1)],1),e("v-layout",{attrs:{row:"",wrap:""}},[e("v-flex",{staticClass:"text-xs-right mt-4",attrs:{xs12:""}},[t.isSubmitting?t._e():t._t("action"),t._t("submit",[t.isSubmitting?e("span",[e("v-progress-circular",{attrs:{indeterminate:"",color:"primary",size:"20"}}),t._v(" Mengirimkan data...")],1):e("v-btn",{staticClass:"primary",attrs:{flat:""},on:{click:t.submit}},[t._v("Simpan")])])],2)],1)],1)};i._withStripped=!0;var r={render:i,staticRenderFns:[]};a.a=r},zJJk:function(t,a){var e={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"AddOrganization"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NamedType",name:{kind:"Name",value:"InputOrganization"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"AddOrganization"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:104}};e.loc.source={body:"mutation AddOrganization($input: InputOrganization) {\n\tAddOrganization(input:$input) {\n\t\tid,\n\t\tname\n\t}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function r(t,a){for(var e=0;e<t.definitions.length;e++){var i=t.definitions[e];if(i.name&&i.name.value==a)return i}}e.definitions.forEach(function(t){if(t.name){var a=new Set;!function t(a,e){if("FragmentSpread"===a.kind)e.add(a.name.value);else if("VariableDefinition"===a.kind){var i=a.type;"NamedType"===i.kind&&e.add(i.name.value)}a.selectionSet&&a.selectionSet.selections.forEach(function(a){t(a,e)}),a.variableDefinitions&&a.variableDefinitions.forEach(function(a){t(a,e)}),a.definitions&&a.definitions.forEach(function(a){t(a,e)})}(t,a),i[t.name.value]=a}}),t.exports=e,t.exports.AddOrganization=function(t,a){var e={kind:t.kind,definitions:[r(t,a)]};t.hasOwnProperty("loc")&&(e.loc=t.loc);for(var n=i[a]||new Set,s=new Set,o=new Set(n);o.size>0;){var l=o;o=new Set,l.forEach(function(t){s.has(t)||(s.add(t),(i[t]||new Set).forEach(function(t){o.add(t)}))})}return s.forEach(function(a){var i=r(t,a);i&&e.definitions.push(i)}),e}(e,"AddOrganization")}});