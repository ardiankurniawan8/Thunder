webpackJsonp([6],{"+ISA":function(e,a,t){"use strict";var n=t("fZjL"),i=t.n(n),r=t("6M+g"),o=t.n(r);a.a={apollo:{$client:"customer"},props:{organization_id:{type:String,required:!0}},data:function(){return{errorMessages:{},isSubmitting:!1,formData:{},transformedData:{}}},mounted:function(){this.reset()},computed:{},watch:{},methods:{reset:function(){this.formData={},this.errorMessages={}},submit:function(e){var a=this;if(a.isSubmitting)return!1;a.$validator.validateAll().then(function(t){t?(a.$emit("SUBMITTING"),a.isSubmitting=!0,a.errorMessages={},a.transformedData={name:a.formData.nama,employee_no:a.formData.nik},a.transformedData.organization_id=a.organization_id,a.$apollo.mutate({mutation:o.a,variables:a.transformedData}).then(function(e){a.$emit("SUBMIT_SUCCESS",e.data.AddEmployee)}).catch(function(e){e.graphQLErrors&&Array.isArray(e.graphQLErrors)&&e.graphQLErrors.length?e.graphQLErrors.forEach(function(e){switch(e.message){case"validation":i()(e.validation).forEach(function(t,n){switch(t){case"name":a.errorMessages.nama=e.validation.name.join(",").replace(t,"nama");break;case"employee_no":a.errorMessages.nik=e.validation.employee_no.join(",").replace(t,"nik")}}),a.$forceUpdate();break;default:a.$emit("SUBMIT_FAIL",e.code),a.isSubmitting=!1}}):e.networkError.message&&(a.$emit("SUBMIT_ERROR","Fail to connect to server"),a.isSubmitting=!1),a.isSubmitting=!1})):(a.errorMessages={},a.errorMessages=a.$validator.errors.collect()),e.preventDefault()})}}}},"5uhJ":function(e,a,t){"use strict";var n=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",[t("v-form",{nativeOn:{keyup:function(a){return"button"in a||13===a.keyCode?e.submit(a):null}}},[t("v-layout",{attrs:{wrap:""}},[t("v-flex",{attrs:{xs12:""}},[t("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{type:"text",name:"nik",label:"nik",error:e.errorMessages.nik&&e.errorMessages.nik.length>0,"error-messages":this.translate(e.errorMessages.nik),placeholder:" "},model:{value:e.formData.nik,callback:function(a){e.$set(e.formData,"nik",a)},expression:"formData['nik']"}})],1),t("v-flex",{attrs:{xs12:""}},[t("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{type:"text",name:"nama",label:"Nama",error:e.errorMessages.nama&&e.errorMessages.nama.length>0,"error-messages":this.translate(e.errorMessages.nama),placeholder:" "},model:{value:e.formData.nama,callback:function(a){e.$set(e.formData,"nama",a)},expression:"formData['nama']"}})],1)],1)],1),t("v-layout",{attrs:{row:"",wrap:""}},[t("v-flex",{staticClass:"text-xs-right mt-4",attrs:{xs12:""}},[e.isSubmitting?e._e():e._t("action"),e._t("submit",[e.isSubmitting?t("span",[t("v-progress-circular",{attrs:{indeterminate:"",color:"primary",size:"20"}}),e._v(" Mengirimkan data...")],1):t("v-btn",{staticClass:"primary",attrs:{flat:""},on:{click:e.submit}},[e._v("Simpan")])])],2)],1)],1)};n._withStripped=!0;var i={render:n,staticRenderFns:[]};a.a=i},"6M+g":function(e,a){var t={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"AddEmployee"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"employee_no"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"organization_id"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"AddEmployee"},arguments:[{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}},{kind:"Argument",name:{kind:"Name",value:"employee_no"},value:{kind:"Variable",name:{kind:"Name",value:"employee_no"}}},{kind:"Argument",name:{kind:"Name",value:"organization_id"},value:{kind:"Variable",name:{kind:"Name",value:"organization_id"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"employee_no"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:208}};t.loc.source={body:"mutation AddEmployee($name: String, $employee_no: String, $organization_id: String) {\n\tAddEmployee(name: $name, employee_no: $employee_no, organization_id: $organization_id) {\n\t\tid,\n\t\temployee_no,\n\t\tname\n\t}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};var n={};function i(e,a){for(var t=0;t<e.definitions.length;t++){var n=e.definitions[t];if(n.name&&n.name.value==a)return n}}t.definitions.forEach(function(e){if(e.name){var a=new Set;!function e(a,t){if("FragmentSpread"===a.kind)t.add(a.name.value);else if("VariableDefinition"===a.kind){var n=a.type;"NamedType"===n.kind&&t.add(n.name.value)}a.selectionSet&&a.selectionSet.selections.forEach(function(a){e(a,t)}),a.variableDefinitions&&a.variableDefinitions.forEach(function(a){e(a,t)}),a.definitions&&a.definitions.forEach(function(a){e(a,t)})}(e,a),n[e.name.value]=a}}),e.exports=t,e.exports.AddEmployee=function(e,a){var t={kind:e.kind,definitions:[i(e,a)]};e.hasOwnProperty("loc")&&(t.loc=e.loc);for(var r=n[a]||new Set,o=new Set,s=new Set(r);s.size>0;){var l=s;s=new Set,l.forEach(function(e){o.has(e)||(o.add(e),(n[e]||new Set).forEach(function(e){s.add(e)}))})}return o.forEach(function(a){var n=i(e,a);n&&t.definitions.push(n)}),t}(t,"AddEmployee")},"88PT":function(e,a,t){"use strict";var n=t("+ISA"),i=t("5uhJ"),r=t("VU/8")(n.a,i.a,!1,null,null,null);r.options.__file="components/forms/hrd/form_employee.vue",a.a=r.exports},WhMt:function(e,a,t){"use strict";var n=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("v-container",{attrs:{"grid-list-lg":""}},[t("v-layout",{attrs:{wrap:""}},[t("v-flex",{attrs:{xs12:""}},[t("v-card",{attrs:{flat:""}},[t("v-toolbar",{attrs:{flat:"",light:"",color:"silver lighten-5"}},[t("v-toolbar-title",[e._v("Data Karyawan "),t("v-icon",[e._v("chevron_right")]),e._v(" Baru")],1),t("v-spacer"),t("v-btn",{attrs:{icon:"",color:"white--text",depressed:"",nuxt:"",to:"/dashboard/"+this.$route.params.id+"/hrd/new"}},[t("v-icon",[e._v("add")])],1)],1),t("v-card-text",[Array.isArray(e.$store.state.ui.alerts.error)&&e.$store.state.ui.alerts.error.length>0?t("v-layout",{staticClass:"red lighten-5 mb-3 red--text",attrs:{"justify-space-around":""}},[t("v-flex",{staticClass:"my-3 text-xs-center",attrs:{xs10:"",sm10:"","justify-center":""}},e._l(this.$store.state.ui.alerts.error,function(a){return t("span",[e._v(e._s(a))])}))],1):e._e(),t("FormEmployee",{ref:"FormEmployee",attrs:{organization_id:e.$route.params.id},on:{SUBMIT_SUCCESS:e.SUBMIT_SUCCESS,SUBMIT_FAIL:e.SUBMIT_FAIL,SUBMIT_ERROR:e.SUBMIT_ERROR}},[t("template",{staticClass:"mr-2",slot:"action"},[t("v-btn",{attrs:{flat:"",nuxt:"",to:"`/dashboard/${$route.params.id}/hrd/employee`",color:"primary"}},[e._v("BATAL")])],1)],2)],1)],1)],1)],1)],1)};n._withStripped=!0;var i={render:n,staticRenderFns:[]};a.a=i},Xxm8:function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=t("xFhX"),i=t("WhMt"),r=t("VU/8")(n.a,i.a,!1,null,null,null);r.options.__file="pages/dashboard/_company_id/hrd/employee/add.vue",a.default=r.exports},xFhX:function(e,a,t){"use strict";var n=t("88PT");a.a={middleware:["auth","session_lifetime"],components:{FormEmployee:n.a},data:function(){return{table:{filter:{}}}},methods:{SUBMIT_SUCCESS:function(e){this.$store.dispatch("ui/alert",{success:"Data Karyawan telah berhasil ditambahkan."}),this.$nuxt._router.replace("/dashboard/"+this.$route.params.id+"/hrd/employee/"+e.id)},SUBMIT_FAIL:function(e){switch(e){case 1601:this.$store.dispatch("ui/alert",{error:"Sekolah ini telah terdaftar dalam akun anda"});break;default:this.$store.dispatch("ui/alert",{error:e})}},SUBMIT_ERROR:function(e){alert("Gagal menghubungi server. Silahkan coba beberapa saat lagi")}}}}});