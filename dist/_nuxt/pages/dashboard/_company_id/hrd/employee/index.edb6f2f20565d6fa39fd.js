webpackJsonp([2],{"+ISA":function(e,a,n){"use strict";var t=n("fZjL"),i=n.n(t),r=n("6M+g"),o=n.n(r);a.a={apollo:{$client:"customer"},props:{organization_id:{type:String,required:!0}},data:function(){return{errorMessages:{},isSubmitting:!1,formData:{},transformedData:{}}},mounted:function(){this.reset()},computed:{},watch:{},methods:{reset:function(){this.formData={},this.errorMessages={}},submit:function(e){var a=this;if(a.isSubmitting)return!1;a.$validator.validateAll().then(function(n){n?(a.$emit("SUBMITTING"),a.isSubmitting=!0,a.errorMessages={},a.transformedData={name:a.formData.nama,employee_no:a.formData.nik},a.transformedData.organization_id=a.organization_id,a.$apollo.mutate({mutation:o.a,variables:a.transformedData}).then(function(e){a.$emit("SUBMIT_SUCCESS",e.data.AddEmployee)}).catch(function(e){e.graphQLErrors&&Array.isArray(e.graphQLErrors)&&e.graphQLErrors.length?e.graphQLErrors.forEach(function(e){switch(e.message){case"validation":i()(e.validation).forEach(function(n,t){switch(n){case"name":a.errorMessages.nama=e.validation.name.join(",").replace(n,"nama");break;case"employee_no":a.errorMessages.nik=e.validation.employee_no.join(",").replace(n,"nik")}}),a.$forceUpdate();break;default:a.$emit("SUBMIT_FAIL",e.code),a.isSubmitting=!1}}):e.networkError.message&&(a.$emit("SUBMIT_ERROR","Fail to connect to server"),a.isSubmitting=!1),a.isSubmitting=!1})):(a.errorMessages={},a.errorMessages=a.$validator.errors.collect()),e.preventDefault()})}}}},"0XGI":function(e,a,n){"use strict";var t=function(){var e=this,a=e.$createElement,n=e._self._c||a;return n("div",[e._t("filter"),e._t("filter_list"),n("v-data-table",{attrs:{headers:e.computedHeaders,items:e.table.data,pagination:e.table.pagination,"total-items":e.table.data_count,loading:e.table.isLoading,"select-all":"","item-key":"name","rows-per-page-items":[1,25,50,100]},on:{"update:pagination":function(a){e.$set(e.table,"pagination",a)}},scopedSlots:e._u([{key:"headers",fn:function(a){return[n("tr",[n("th",{attrs:{width:"5"}},[e._v("#")]),e._l(a.headers,function(a){return n("th",{key:a.text,class:["column sortable",e.table.pagination.descending?"desc":"asc",a.value===e.table.pagination.sortBy?"active":"","text-xs-"+a.align],on:{click:function(n){e.changeSort(a.value)}}},[n("v-icon",{attrs:{small:""}},[e._v("arrow_upward")]),e._v("\n          "+e._s(a.text)+" \n        ")],1)})],2)]}},{key:"items",fn:function(a){return[n("tr",{staticStyle:{cursor:"pointer"},on:{click:function(n){e.rowClicked(a.item.id)}}},[n("td",[e._v("\n          "+e._s((e.table.pagination.page-1)*e.table.pagination.rowsPerPage+a.index+1)+"\n        ")]),e._l(e.computedHeaders,function(t){return["name"===t.text?n("td",[e._v(e._s(a.item.name))]):"employee no"===t.text?n("td",[e._v(e._s(a.item.employee_no))]):e._e()]})],2)]}}])},[n("template",{slot:"no-results"},[e.table.isLoading?n("span",[e._v("Loading...")]):n("span",[e._v("Tidak ada data ditemukan")])]),n("template",{slot:"no-data"},[e.defaultData?n("span",[e._v("Loading...")]):n("span",[e._v("Tidak ada data ditemukan")])])],2)],2)};t._withStripped=!0;var i={render:t,staticRenderFns:[]};a.a=i},"5uhJ":function(e,a,n){"use strict";var t=function(){var e=this,a=e.$createElement,n=e._self._c||a;return n("div",[n("v-form",{nativeOn:{keyup:function(a){return"button"in a||13===a.keyCode?e.submit(a):null}}},[n("v-layout",{attrs:{wrap:""}},[n("v-flex",{attrs:{xs12:""}},[n("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{type:"text",name:"nik",label:"nik",error:e.errorMessages.nik&&e.errorMessages.nik.length>0,"error-messages":this.translate(e.errorMessages.nik),placeholder:" "},model:{value:e.formData.nik,callback:function(a){e.$set(e.formData,"nik",a)},expression:"formData['nik']"}})],1),n("v-flex",{attrs:{xs12:""}},[n("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{type:"text",name:"nama",label:"Nama",error:e.errorMessages.nama&&e.errorMessages.nama.length>0,"error-messages":this.translate(e.errorMessages.nama),placeholder:" "},model:{value:e.formData.nama,callback:function(a){e.$set(e.formData,"nama",a)},expression:"formData['nama']"}})],1)],1)],1),n("v-layout",{attrs:{row:"",wrap:""}},[n("v-flex",{staticClass:"text-xs-right mt-4",attrs:{xs12:""}},[e.isSubmitting?e._e():e._t("action"),e._t("submit",[e.isSubmitting?n("span",[n("v-progress-circular",{attrs:{indeterminate:"",color:"primary",size:"20"}}),e._v(" Mengirimkan data...")],1):n("v-btn",{staticClass:"primary",attrs:{flat:""},on:{click:e.submit}},[e._v("Simpan")])])],2)],1)],1)};t._withStripped=!0;var i={render:t,staticRenderFns:[]};a.a=i},"6M+g":function(e,a){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"AddEmployee"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"employee_no"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"organization_id"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"AddEmployee"},arguments:[{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}},{kind:"Argument",name:{kind:"Name",value:"employee_no"},value:{kind:"Variable",name:{kind:"Name",value:"employee_no"}}},{kind:"Argument",name:{kind:"Name",value:"organization_id"},value:{kind:"Variable",name:{kind:"Name",value:"organization_id"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"employee_no"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:208}};n.loc.source={body:"mutation AddEmployee($name: String, $employee_no: String, $organization_id: String) {\n\tAddEmployee(name: $name, employee_no: $employee_no, organization_id: $organization_id) {\n\t\tid,\n\t\temployee_no,\n\t\tname\n\t}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};var t={};function i(e,a){for(var n=0;n<e.definitions.length;n++){var t=e.definitions[n];if(t.name&&t.name.value==a)return t}}n.definitions.forEach(function(e){if(e.name){var a=new Set;!function e(a,n){if("FragmentSpread"===a.kind)n.add(a.name.value);else if("VariableDefinition"===a.kind){var t=a.type;"NamedType"===t.kind&&n.add(t.name.value)}a.selectionSet&&a.selectionSet.selections.forEach(function(a){e(a,n)}),a.variableDefinitions&&a.variableDefinitions.forEach(function(a){e(a,n)}),a.definitions&&a.definitions.forEach(function(a){e(a,n)})}(e,a),t[e.name.value]=a}}),e.exports=n,e.exports.AddEmployee=function(e,a){var n={kind:e.kind,definitions:[i(e,a)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);for(var r=t[a]||new Set,o=new Set,l=new Set(r);l.size>0;){var d=l;l=new Set,d.forEach(function(e){o.has(e)||(o.add(e),(t[e]||new Set).forEach(function(e){l.add(e)}))})}return o.forEach(function(a){var t=i(e,a);t&&n.definitions.push(t)}),n}(n,"AddEmployee")},"88PT":function(e,a,n){"use strict";var t=n("+ISA"),i=n("5uhJ"),r=n("VU/8")(t.a,i.a,!1,null,null,null);r.options.__file="components/forms/hrd/form_employee.vue",a.a=r.exports},"Jr+1":function(e,a,n){"use strict";var t=n("88PT"),i=n("glyt");a.a={middleware:["auth","session_lifetime"],components:{TableEmployee:i.a,FormEmployee:t.a},data:function(){return{table:{filter:{}},dialog:{form_employee:!1},fab:!1}},watch:{"dialog.form_employee":function(e){!1===e&&(this.$refs.FormEmployee.formData={})}},methods:{EmployeeClicked:function(e){this.$nuxt._router.replace({path:"/dashboard/"+this.$route.params.id+"/hrd/employee/"+e})},filterEmployee:function(){this.$refs.TableEmployee.filter=this.table.filter,this.$refs.TableEmployee.fetch()},EMPLOYEE_SUBMIT_SUCCESS:function(e){this.$store.dispatch("ui/alert",{success:"Data Karyawan telah berhasil ditambahkan."}),this.$nuxt._router.replace("/dashboard/"+this.$route.params.id+"/hrd/employee/"+e.id)},EMPLOYEE_SUBMIT_FAIL:function(e){switch(e){case 1601:this.$store.dispatch("ui/alert",{error:"Sekolah ini telah terdaftar dalam akun anda"});break;default:this.$store.dispatch("ui/alert",{error:e})}},EMPLOYEE_SUBMIT_ERROR:function(e){alert("Gagal menghubungi server. Silahkan coba beberapa saat lagi")}}}},"NFz/":function(e,a,n){"use strict";var t=function(){var e=this,a=e.$createElement,n=e._self._c||a;return n("v-container",[n("v-layout",{attrs:{wrap:""}},[n("v-flex",{attrs:{xs12:""}},[n("v-card",{attrs:{flat:""}},[n("v-card-title",{staticClass:"white",attrs:{flat:"",light:""}},[n("h1",{staticClass:"headline"},[e._v("Data Karyawan")]),n("v-spacer"),n("v-btn",{attrs:{icon:""},on:{click:function(a){e.dialog.form_employee=!0}}},[n("v-icon",[e._v("add")])],1)],1),n("v-card-text",[n("v-layout",{attrs:{wrap:""}},[n("v-flex",{attrs:{xs12:"",md6:"",lg3:""}},[n("v-text-field",{staticClass:"b-1",attrs:{flat:"",solo:"","prepend-icon":"search","prepend-icon-cb":e.filterEmployee,placeholder:"pencarian berdasarkan nama atau nomor karyawan",color:"primary"},nativeOn:{keyup:function(a){return"button"in a||!e._k(a.keyCode,"enter",13,a.key,"Enter")?e.filterEmployee(a):null}},model:{value:e.table.filter.search,callback:function(a){e.$set(e.table.filter,"search",a)},expression:"table.filter.search"}})],1),n("v-flex",{attrs:{xs12:"",md4:"",lg2:""}},[n("v-btn",{attrs:{flat:"",color:"primary"},nativeOn:{click:function(a){return e.filterEmployee(a)}}},[e._v("Filter")])],1)],1)],1),n("v-divider"),n("TableEmployee",{ref:"TableEmployee",attrs:{organizationId:this.$route.params.id,headers:["employee no","name"],dataFilter:e.table.filter},on:{ITEM_CLICKED:e.EmployeeClicked}})],1)],1)],1),n("v-dialog",{attrs:{persistent:"","max-width":"500px"},model:{value:e.dialog.form_employee,callback:function(a){e.$set(e.dialog,"form_employee",a)},expression:"dialog.form_employee"}},[n("v-card",[n("v-card-title",[n("span",{staticClass:"headline"},[e._v("Karyawan Baru")])]),n("v-card-text",[n("FormEmployee",{ref:"FormEmployee",attrs:{organization_id:e.$route.params.id},on:{SUBMIT_SUCCESS:e.EMPLOYEE_SUBMIT_SUCCESS,SUBMIT_FAIL:e.EMPLOYEE_SUBMIT_FAIL,SUBMIT_ERROR:e.EMPLOYEE_SUBMIT_ERROR}},[n("template",{staticClass:"mr-2",slot:"action"},[n("v-btn",{attrs:{flat:"",color:"primary"},on:{click:function(a){e.dialog.form_employee=!1}}},[e._v("BATAL")])],1)],2)],1)],1)],1)],1)};t._withStripped=!0;var i={render:t,staticRenderFns:[]};a.a=i},QH9N:function(e,a){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"Employee"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"search"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"employee_of"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"employee_no"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"skip"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"take"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"orderby"}},type:{kind:"ListType",type:{kind:"NamedType",name:{kind:"Name",value:"OrderBy"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"Employee"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}},{kind:"Argument",name:{kind:"Name",value:"search"},value:{kind:"Variable",name:{kind:"Name",value:"search"}}},{kind:"Argument",name:{kind:"Name",value:"employee_of"},value:{kind:"Variable",name:{kind:"Name",value:"employee_of"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}},{kind:"Argument",name:{kind:"Name",value:"employee_no"},value:{kind:"Variable",name:{kind:"Name",value:"employee_no"}}},{kind:"Argument",name:{kind:"Name",value:"skip"},value:{kind:"Variable",name:{kind:"Name",value:"skip"}}},{kind:"Argument",name:{kind:"Name",value:"take"},value:{kind:"Variable",name:{kind:"Name",value:"take"}}},{kind:"Argument",name:{kind:"Name",value:"orderby"},value:{kind:"Variable",name:{kind:"Name",value:"orderby"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"employee_no"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"employments"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"role"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"active_since"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"active_until"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"EmployeeCount"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}},{kind:"Argument",name:{kind:"Name",value:"search"},value:{kind:"Variable",name:{kind:"Name",value:"search"}}},{kind:"Argument",name:{kind:"Name",value:"employee_of"},value:{kind:"Variable",name:{kind:"Name",value:"employee_of"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}},{kind:"Argument",name:{kind:"Name",value:"employee_no"},value:{kind:"Variable",name:{kind:"Name",value:"employee_no"}}}],directives:[]}]}}],loc:{start:0,end:585}};n.loc.source={body:"query Employee($id: String, \n\t\t\t\t$search: String, \n\t\t\t\t$employee_of: String, \n\t\t\t\t$name: String, \n\t\t\t\t$employee_no: String, \n\t\t\t\t$skip: Int, \n\t\t\t\t$take: Int\n\t\t\t\t$orderby: [OrderBy]\n\t\t\t) \t\n{\n\tEmployee(\n\t\t\t\tid: $id, \n\t\t\t\tsearch:$search, \n\t\t\t\temployee_of:$employee_of, \n\t\t\t\tname:$name, \n\t\t\t\temployee_no:$employee_no, \n\t\t\t\tskip:$skip, \n\t\t\t\ttake:$take,\n\t\t\t\torderby:$orderby\n\t\t\t) \n\t{\n\t\tid,\n\t\tname,\n\t\temployee_no,\n\t\temployments {role, active_since, active_until}\n\t},\n\tEmployeeCount(\n\t\tid: $id, \n\t\tsearch:$search, \n\t\temployee_of:$employee_of, \n\t\tname:$name, \n\t\temployee_no:$employee_no, \n\t)\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var t={};function i(e,a){for(var n=0;n<e.definitions.length;n++){var t=e.definitions[n];if(t.name&&t.name.value==a)return t}}n.definitions.forEach(function(e){if(e.name){var a=new Set;!function e(a,n){if("FragmentSpread"===a.kind)n.add(a.name.value);else if("VariableDefinition"===a.kind){var t=a.type;"NamedType"===t.kind&&n.add(t.name.value)}a.selectionSet&&a.selectionSet.selections.forEach(function(a){e(a,n)}),a.variableDefinitions&&a.variableDefinitions.forEach(function(a){e(a,n)}),a.definitions&&a.definitions.forEach(function(a){e(a,n)})}(e,a),t[e.name.value]=a}}),e.exports=n,e.exports.Employee=function(e,a){var n={kind:e.kind,definitions:[i(e,a)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);for(var r=t[a]||new Set,o=new Set,l=new Set(r);l.size>0;){var d=l;l=new Set,d.forEach(function(e){o.has(e)||(o.add(e),(t[e]||new Set).forEach(function(e){l.add(e)}))})}return o.forEach(function(a){var t=i(e,a);t&&n.definitions.push(t)}),n}(n,"Employee")},glyt:function(e,a,n){"use strict";var t=n("vW/M"),i=n("0XGI"),r=n("VU/8")(t.a,i.a,!1,null,null,null);r.options.__file="components/table/hrd/table_employee.vue",a.a=r.exports},q2OE:function(e,a,n){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var t=n("Jr+1"),i=n("NFz/"),r=n("VU/8")(t.a,i.a,!1,null,null,null);r.options.__file="pages/dashboard/_company_id/hrd/employee/index.vue",a.default=r.exports},"vW/M":function(e,a,n){"use strict";var t=n("QH9N"),i=n.n(t);a.a={props:{headers:{type:Array,default:function(){return[]}},dataFilter:{type:Object,default:function(){return{}}},defaultData:{type:Array,default:function(){return[]}},organizationId:{type:String,required:!0}},watch:{"table.pagination.rowsPerPage":function(){this.fetch()},"table.pagination.page":function(){this.fetch()}},computed:{computedHeaders:function(){var e=this,a=[];return e.headers.forEach(function(n){for(var t=0;t<e.table.availableHeaders.length;t++)e.table.availableHeaders[t].text===n&&a.push(e.table.availableHeaders[t])}),a}},apollo:{$client:"customer"},data:function(){return{table:{isLoading:!1,data:[],data_count:0,pagination:{sortBy:"name",descending:!1,page:1,rowsPerPage:25},availableHeaders:[{text:"employee no",align:"left",value:"employee_no",sortable:!0},{text:"name",align:"left",value:"name",sortable:!0}]}}},mounted:function(){0===this.defaultData.length?this.fetch():this.table.data=this.defaultData},methods:{fetch:function(){var e=this;e.table.data=[],e.table.isLoading=!0;var a={employee_of:this.organizationId,skip:(e.table.pagination.page-1)*e.table.pagination.rowsPerPage,take:e.table.pagination.rowsPerPage,orderby:[{field:this.table.pagination.sortBy,mode:this.table.pagination.descending?-1:1}]};for(var n in this.dataFilter)this.dataFilter.hasOwnProperty(n)&&(a[n]=this.dataFilter[n]);this.$apollo.query({query:i.a,variables:a,fetchPolicy:"no-cache"}).then(function(a){e.table.data=a.data.Employee,e.table.data_count=a.data.EmployeeCount,e.table.isLoading=!1})},changeSort:function(e){this.table.pagination.sortBy===e?this.table.pagination.descending=!this.table.pagination.descending:(this.table.pagination.descending=!1,this.table.pagination.sortBy=e),this.fetch()},rowClicked:function(e){this.$emit("ITEM_CLICKED",e)}}}}});