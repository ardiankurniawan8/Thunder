webpackJsonp([7],{"5pTj":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("lu3l"),r=a("eTO1"),n=a("VU/8")(s.a,r.a,!1,null,null,null);n.options.__file="pages/reset-password.vue",e.default=n.exports},"7CJD":function(t,e,a){"use strict";var s=a("Rt7u"),r=a.n(s);e.a={apollo:{},props:{token:{type:String,required:!0},username:{type:String,required:!0}},data:function(){return{errorMessages:{},isSubmitting:!1,formData:{},GQL:{data:"ResetPasswordWithToken"}}},mounted:function(){this.reset()},computed:{transformedInput:function(){return{input:{token:this.token,username:this.username,password:this.formData.password}}},transformedErrors:function(){return{password:this.translate(this.errorMessages.password,{password:"password baru"}),password_confirmation:this.translate(this.errorMessages.password_confirmation,{password_confirmation:"konfirmasi password"})}}},watch:{},methods:{reset:function(){this.formData={},this.errorMessages={}},submit:function(t){var e=this;if(e.isSubmitting)return!1;e.$validator.validateAll().then(function(a){a?(e.$emit("SUBMITTING"),e.isSubmitting=!0,e.$apollo.mutate({mutation:r.a,variables:e.transformedInput}).then(function(t){e.$emit("SUBMIT_SUCCESS",t.data[e.GQL.data]),e.isSubmitting=!0}).catch(function(t){t.graphQLErrors&&Array.isArray(t.graphQLErrors)&&t.graphQLErrors.length?t.graphQLErrors.forEach(function(t){switch(t.message){case"validation":e.errorMessages=t.validation,e.$forceUpdate();break;default:e.$emit("SUBMIT_FAIL",t.code)}}):t.networkError.message&&e.$emit("SUBMIT_ERROR","Fail to connect to server"),e.isSubmitting=!1})):e.errorMessages=e.$validator.errors.collect(),t.preventDefault()})}}}},"9TYS":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-layout",{attrs:{wrap:""},on:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.submit(e):null}}},[a("v-flex",{staticClass:"mb-2",attrs:{xs12:""}},[a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{type:"password",name:"password","append-icon":"lock",label:"password baru","error-messages":t.transformedErrors.password,autocomplete:"new-password"},model:{value:t.formData.password,callback:function(e){t.$set(t.formData,"password",e)},expression:"formData['password']"}})],1),a("v-flex",{staticClass:"mb-2",attrs:{xs12:""}},[a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|confirmed:password",expression:"'required|confirmed:password'"}],attrs:{type:"password",name:"password_confirmation","append-icon":"lock",label:"konfirmasi password","error-messages":t.transformedErrors.password_confirmation,autocomplete:"new-password"},model:{value:t.formData.password_confirmation,callback:function(e){t.$set(t.formData,"password_confirmation",e)},expression:"formData['password_confirmation']"}})],1)],1),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{staticClass:"mb-2",attrs:{xs12:""}},[t.isSubmitting?a("v-btn",{staticClass:"grey lighten-2",attrs:{flat:"",block:"",disabled:""}},[a("v-progress-circular",{staticClass:"mr-3",attrs:{indeterminate:"",size:"20"}}),t._v(" Mengirimkan data...")],1):a("v-btn",{staticClass:"primary",attrs:{flat:"",block:""},on:{click:t.submit}},[t._v("Perbarui Password")])],1)],1)],1)};s._withStripped=!0;var r={render:s,staticRenderFns:[]};e.a=r},QhY6:function(t,e,a){"use strict";var s=a("7CJD"),r=a("9TYS"),n=a("VU/8")(s.a,r.a,!1,null,null,null);n.options.__file="components/auth/form/reset_password_with_token.vue",e.a=n.exports},Rt7u:function(t,e){var a={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"ResetPasswordWithToken"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NamedType",name:{kind:"Name",value:"InputResetPasswordWithToken"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"ResetPasswordWithToken"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[]}]}}],loc:{start:0,end:111}};a.loc.source={body:"mutation ResetPasswordWithToken($input: InputResetPasswordWithToken) {\n\tResetPasswordWithToken(input: $input)\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};var s={};function r(t,e){for(var a=0;a<t.definitions.length;a++){var s=t.definitions[a];if(s.name&&s.name.value==e)return s}}a.definitions.forEach(function(t){if(t.name){var e=new Set;!function t(e,a){if("FragmentSpread"===e.kind)a.add(e.name.value);else if("VariableDefinition"===e.kind){var s=e.type;"NamedType"===s.kind&&a.add(s.name.value)}e.selectionSet&&e.selectionSet.selections.forEach(function(e){t(e,a)}),e.variableDefinitions&&e.variableDefinitions.forEach(function(e){t(e,a)}),e.definitions&&e.definitions.forEach(function(e){t(e,a)})}(t,e),s[t.name.value]=e}}),t.exports=a,t.exports.ResetPasswordWithToken=function(t,e){var a={kind:t.kind,definitions:[r(t,e)]};t.hasOwnProperty("loc")&&(a.loc=t.loc);for(var n=s[e]||new Set,i=new Set,o=new Set(n);o.size>0;){var d=o;o=new Set,d.forEach(function(t){i.has(t)||(i.add(t),(s[t]||new Set).forEach(function(t){o.add(t)}))})}return i.forEach(function(e){var s=r(t,e);s&&a.definitions.push(s)}),a}(a,"ResetPasswordWithToken")},eTO1:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-layout",{staticClass:"my-4",attrs:{"justify-space-around":""}},[a("v-flex",{attrs:{xs12:"","justify-center":""}},[a("v-card",{staticClass:"b-1",attrs:{flat:""}},[a("v-card-title",{staticClass:"headline mb-2"},[t._v("Ubah Password")]),t.$route.query.username&&t.$route.query.token&&"error"!==t.show?"form"===t.show?a("v-card-text",[a("p",[t._v("Silahkan masukkan password baru anda ke dalam isian di bawah ini untuk mengganti password")]),a("FormResetPasswordWithToken",{ref:"FormResetPasswordWithToken",attrs:{username:t.$route.query.username,token:t.$route.query.token},on:{SUBMIT_SUCCESS:t.SUBMIT_SUCCESS,SUBMIT_FAIL:t.SUBMIT_FAIL,SUBMIT_ERROR:t.SUBMIT_ERROR}})],1):a("v-card-text",[a("p",[t._v("Password anda telah berhasil diubah")]),a("div",{staticClass:"text-xs-center"},[a("v-icon",{staticClass:"green--text display-3 my-4"},[t._v("check_circle")])],1),a("p",[t._v("Untuk masuk ke dalam aplikasi ini silahkan login "),a("nuxt-link",{attrs:{to:"/"}},[t._v("di sini")])],1)]):a("v-card-text",[a("div",{staticClass:"text-xs-center"},[a("v-icon",{staticClass:"red--text display-3 my-4"},[t._v("error")])],1),a("p",[t._v("Link yang anda akses tidak valid. Untuk mendapatkan link mengubah password anda silahkan klik "),a("nuxt-link",{attrs:{to:"/forget-password"}},[t._v("di sini")])],1)]),a("v-divider"),a("v-card-text",[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs6:""}},[a("nuxt-link",{attrs:{to:"/"}},[t._v("Login")])],1),a("v-flex",{attrs:{xs6:"","text-xs-right":""}},[a("nuxt-link",{attrs:{to:"/register"}},[t._v("Daftar")])],1)],1)],1)],1)],1)],1)};s._withStripped=!0;var r={render:s,staticRenderFns:[]};e.a=r},lu3l:function(t,e,a){"use strict";var s=a("QhY6");e.a={layout:"auth",components:{FormResetPasswordWithToken:s.a},data:function(){return{show:"form"}},asyncData:function(t){t.store.dispatch("authentication/logout")},methods:{SUBMIT_SUCCESS:function(t){this.show="message",this.$store.dispatch("ui/alert",{})},SUBMIT_FAIL:function(t){switch(t){case 1001:this.$store.dispatch("ui/alert",{error:"Proses pengubahan password gagal"}),this.show="error"}},SUBMIT_ERROR:function(t){alert("Connection error")}}}}});