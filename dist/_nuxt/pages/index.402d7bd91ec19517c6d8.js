webpackJsonp([10],{"+ptz":function(e,t,a){"use strict";var n=function(){var e=this.$createElement,t=this._self._c||e;return t("v-layout",{staticClass:"my-4",attrs:{"justify-space-around":""}},[t("v-flex",{attrs:{xs12:"","justify-center":""}},[t("v-card",{staticClass:"b-1",attrs:{flat:""}},[t("v-card-title",{staticClass:"headline mb-2"},[this._v("Account Login")]),t("v-card-text",[t("FormLogin",{ref:"FormLogin",on:{SUBMIT_ERROR:this.SUBMIT_ERROR,SUBMIT_FAIL:this.SUBMIT_FAIL,SUBMIT_SUCCESS:this.LOGIN_SUCCESS}})],1),t("v-divider"),t("v-card-text",[t("v-layout",{attrs:{wrap:""}},[t("v-flex",{attrs:{xs6:""}},[t("nuxt-link",{attrs:{to:"/forget-password"}},[this._v("Lupa Password")])],1),t("v-flex",{attrs:{xs6:"","text-xs-right":""}},[t("nuxt-link",{attrs:{to:"/register"}},[this._v("Daftar")])],1)],1)],1)],1)],1)],1)};n._withStripped=!0;var i={render:n,staticRenderFns:[]};t.a=i},"/TYz":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("z16F"),i=a("+ptz"),r=a("VU/8")(n.a,i.a,!1,null,null,null);r.options.__file="pages/index.vue",t.default=r.exports},"2OBD":function(e,t,a){"use strict";var n=a("3u0M"),i=a("CW//"),r=a("VU/8")(n.a,i.a,!1,null,null,null);r.options.__file="components/auth/form/login.vue",t.a=r.exports},"3u0M":function(e,t,a){"use strict";var n=a("8jPt"),i=a.n(n);t.a={apollo:{},props:{},data:function(){return{errorMessages:{},isSubmitting:!1,formData:{},GQL:{data:"Authenticate"}}},mounted:function(){this.reset()},computed:{transformedInput:function(){return{input:{username:this.formData.email,password:this.formData.password}}},transformedErrors:function(){return{email:this.translate(this.errorMessages.username,{username:"email"}),password:this.translate(this.errorMessages.password)}}},watch:{},methods:{reset:function(){this.formData={},this.errorMessages={}},submit:function(e){var t=this;if(t.isSubmitting)return!1;t.$validator.validateAll().then(function(a){a?(t.$emit("SUBMITTING"),t.isSubmitting=!0,t.$apollo.mutate({mutation:i.a,variables:t.transformedInput}).then(function(e){t.$emit("SUBMIT_SUCCESS",e.data[t.GQL.data]),t.isSubmitting=!0}).catch(function(e){e.graphQLErrors&&Array.isArray(e.graphQLErrors)&&e.graphQLErrors.length?e.graphQLErrors.forEach(function(e){switch(e.message){case"validation":t.errorMessages=e.validation,t.$forceUpdate();break;default:t.$emit("SUBMIT_FAIL",e.code)}}):e.networkError.message&&t.$emit("SUBMIT_ERROR","Fail to connect to server"),t.isSubmitting=!1})):t.errorMessages=t.$validator.errors.collect(),e.preventDefault()})}}}},"8jPt":function(e,t){var a={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"Authenticate"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NamedType",name:{kind:"Name",value:"InputLogin"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"Authenticate"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"username"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"token"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:112}};a.loc.source={body:"mutation Authenticate($input: InputLogin) {\n\tAuthenticate(input: $input) {\n\t\tuser {name, username},\n\t\ttoken\n\t}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};var n={};function i(e,t){for(var a=0;a<e.definitions.length;a++){var n=e.definitions[a];if(n.name&&n.name.value==t)return n}}a.definitions.forEach(function(e){if(e.name){var t=new Set;!function e(t,a){if("FragmentSpread"===t.kind)a.add(t.name.value);else if("VariableDefinition"===t.kind){var n=t.type;"NamedType"===n.kind&&a.add(n.name.value)}t.selectionSet&&t.selectionSet.selections.forEach(function(t){e(t,a)}),t.variableDefinitions&&t.variableDefinitions.forEach(function(t){e(t,a)}),t.definitions&&t.definitions.forEach(function(t){e(t,a)})}(e,t),n[e.name.value]=t}}),e.exports=a,e.exports.Authenticate=function(e,t){var a={kind:e.kind,definitions:[i(e,t)]};e.hasOwnProperty("loc")&&(a.loc=e.loc);for(var r=n[t]||new Set,s=new Set,o=new Set(r);o.size>0;){var u=o;o=new Set,u.forEach(function(e){s.has(e)||(s.add(e),(n[e]||new Set).forEach(function(e){o.add(e)}))})}return s.forEach(function(t){var n=i(e,t);n&&a.definitions.push(n)}),a}(a,"Authenticate")},"CW//":function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-layout",{attrs:{wrap:""},on:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.submit(t):null}}},[a("v-flex",{staticClass:"mb-2",attrs:{xs12:""}},[a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{type:"text",name:"username","append-icon":"email",label:"email","error-messages":e.transformedErrors.email,autocomplete:"new-password"},model:{value:e.formData.email,callback:function(t){e.$set(e.formData,"email",t)},expression:"formData['email']"}})],1),a("v-flex",{staticClass:"mb-2",attrs:{xs12:""}},[a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{type:"password",name:"password","append-icon":"lock",label:"password","error-messages":e.transformedErrors.password,autocomplete:"new-password"},model:{value:e.formData.password,callback:function(t){e.$set(e.formData,"password",t)},expression:"formData['password']"}})],1)],1),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{staticClass:"mb-2",attrs:{xs12:""}},[e.isSubmitting?a("v-btn",{staticClass:"grey lighten-2",attrs:{flat:"",block:"",disabled:""}},[a("v-progress-circular",{staticClass:"mr-3",attrs:{indeterminate:"",size:"20"}}),e._v(" Mengirimkan data...")],1):a("v-btn",{staticClass:"primary",attrs:{flat:"",block:""},on:{click:e.submit}},[e._v("Login")])],1)],1)],1)};n._withStripped=!0;var i={render:n,staticRenderFns:[]};t.a=i},z16F:function(e,t,a){"use strict";var n=a("2OBD");t.a={layout:"auth",components:{FormLogin:n.a},asyncData:function(e){e.store.dispatch("authentication/logout")},methods:{LOGIN_SUCCESS:function(e){this.$store.dispatch("authentication/login",{user:e.user,token:e.token}),this.$nuxt._router.replace("/me")},SUBMIT_ERROR:function(e){alert("Connection error")},SUBMIT_FAIL:function(e){switch(e){case 1e3:this.$store.dispatch("ui/alert",{error:"Kombinasi email dan password anda tidak cocok"})}}}}}});